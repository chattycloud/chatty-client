/*!
 * ChattyClient v1.2.0
 * Build at 2023.4.11
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).io={},e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(){s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function f(e,t,n,i){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),a=new O(i||[]);return r(s,"_invoke",{value:_(e,n,a)}),s}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var h={};function p(){}function d(){}function y(){}var v={};c(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(T([])));g&&g!==t&&n.call(g,o)&&(v=g);var b=y.prototype=p.prototype=Object.create(v);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,o,s,a){var u=l(e[r],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,s,a)}),(function(e){i("throw",e,s,a)})):t.resolve(f).then((function(e){c.value=e,s(c)}),(function(e){return i("throw",e,s,a)}))}a(u.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=k(s,n);if(a){if(a===h)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function k(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:d,configurable:!0}),d.displayName=c(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},E(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new w(f(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(b),c(b,u,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){u(o,r,i,s,a,"next",e)}function a(e){u(o,r,i,s,a,"throw",e)}s(void 0)}))}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function h(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,n){return(t=R(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e,t,n){return b=g()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&m(i,n.prototype),i},b.apply(null,arguments)}function E(e){var t="function"==typeof Map?new Map:void 0;return E=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return b(e,arguments,v(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),m(r,e)},E(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){var t=g();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,n)}}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},k.apply(this,arguments)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=O(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function R(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var x=Object.create(null);x.open="0",x.close="1",x.ping="2",x.pong="3",x.message="4",x.upgrade="5",x.noop="6";var N=Object.create(null);Object.keys(x).forEach((function(e){N[x[e]]=e}));for(var L={type:"error",data:"parser error"},j="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),P="function"==typeof ArrayBuffer,B=function(e,t,n){var r,i=e.type,o=e.data;return j&&o instanceof Blob?t?n(o):M(o,n):P&&(o instanceof ArrayBuffer||(r=o,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?t?n(o):M(new Blob([o]),n):n(x[i]+(o||""))},M=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)},I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D="undefined"==typeof Uint8Array?[]:new Uint8Array(256),F=0;F<I.length;F++)D[I.charCodeAt(F)]=F;var U="function"==typeof ArrayBuffer,q=function(e,t){if("string"!=typeof e)return{type:"message",data:z(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:H(e.substring(1),t)}:N[n]?e.length>1?{type:N[n],data:e.substring(1)}:{type:N[n]}:L},H=function(e,t){if(U){var n=function(e){var t,n,r,i,o,s=.75*e.length,a=e.length,u=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),f=new Uint8Array(c);for(t=0;t<a;t+=4)n=D[e.charCodeAt(t)],r=D[e.charCodeAt(t+1)],i=D[e.charCodeAt(t+2)],o=D[e.charCodeAt(t+3)],f[u++]=n<<2|r>>4,f[u++]=(15&r)<<4|i>>2,f[u++]=(3&i)<<6|63&o;return c}(e);return z(n,t)}return{base64:!0,data:e}},z=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},K=String.fromCharCode(30);function V(e){if(e)return function(e){for(var t in V.prototype)e[t]=V.prototype[t];return e}(e)}V.prototype.on=V.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},V.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},V.prototype.off=V.prototype.removeListener=V.prototype.removeAllListeners=V.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},V.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},V.prototype.emitReserved=V.prototype.emit,V.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},V.prototype.hasListeners=function(e){return!!this.listeners(e).length};var G="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function J(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var W=G.setTimeout,Y=G.clearTimeout;function X(e,t){t.useNativeTimers?(e.setTimeoutFn=W.bind(G),e.clearTimeoutFn=Y.bind(G)):(e.setTimeoutFn=G.setTimeout.bind(G),e.clearTimeoutFn=G.clearTimeout.bind(G))}var $=1.33;var Q,Z=function(e){y(n,e);var t=_(n);function n(e,r,i){var o;return f(this,n),(o=t.call(this,e)).description=r,o.context=i,o.type="TransportError",o}return h(n)}(E(Error)),ee=function(e){y(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this)).writable=!1,X(w(r),e),r.opts=e,r.query=e.query,r.socket=e.socket,r}return h(n,[{key:"onError",value:function(e,t,r){return k(v(n.prototype),"emitReserved",this).call(this,"error",new Z(e,t,r)),this}},{key:"open",value:function(){return this.readyState="opening",this.doOpen(),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,k(v(n.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=q(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){k(v(n.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",k(v(n.prototype),"emitReserved",this).call(this,"close",e)}},{key:"pause",value:function(e){}}]),n}(V),te="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ne=64,re={},ie=0,oe=0;function se(e){var t="";do{t=te[e%ne]+t,e=Math.floor(e/ne)}while(e>0);return t}function ae(){var e=se(+new Date);return e!==Q?(ie=0,Q=e):e+"."+se(ie++)}for(;oe<ne;oe++)re[te[oe]]=oe;function ue(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}var ce=!1;try{ce="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}var fe=ce;function le(e){var t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||fe))return new XMLHttpRequest}catch(e){}if(!t)try{return new(G[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function he(){}var pe=null!=new le({xdomain:!1}).responseType,de=function(e){y(n,e);var t=_(n);function n(e){var r;if(f(this,n),(r=t.call(this,e)).polling=!1,"undefined"!=typeof location){var i="https:"===location.protocol,o=location.port;o||(o=i?"443":"80"),r.xd="undefined"!=typeof location&&e.hostname!==location.hostname||o!==e.port,r.xs=e.secure!==i}var s=e&&e.forceBase64;return r.supportsBinary=pe&&!s,r}return h(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var n=e.split(K),r=[],i=0;i<n.length;i++){var o=q(n[i],t);if(r.push(o),"error"===o.type)break}return r})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var n=e.length,r=new Array(n),i=0;e.forEach((function(e,o){B(e,!1,(function(e){r[o]=e,++i===n&&t(r.join(K))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emitReserved("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=ae()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=ue(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d(e,{xd:this.xd,xs:this.xs},this.opts),new ye(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(function(e,t){n.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t,n){e.onError("xhr poll error",t,n)})),this.pollXhr=t}}]),n}(ee),ye=function(e){y(n,e);var t=_(n);function n(e,r){var i;return f(this,n),X(w(i=t.call(this)),r),i.opts=r,i.method=r.method||"GET",i.uri=e,i.async=!1!==r.async,i.data=void 0!==r.data?r.data:null,i.create(),i}return h(n,[{key:"create",value:function(){var e=this,t=J(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var r=this.xhr=new le(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var i in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}catch(e){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{r.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"==typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(t){return void this.setTimeoutFn((function(){e.onError(t)}),0)}"undefined"!=typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=he,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),n}(V);if(ye.requestsCount=0,ye.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",ve);else if("function"==typeof addEventListener){addEventListener("onpagehide"in G?"pagehide":"unload",ve,!1)}function ve(){for(var e in ye.requests)ye.requests.hasOwnProperty(e)&&ye.requests[e].abort()}var me="function"==typeof Promise&&"function"==typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},ge=G.WebSocket||G.MozWebSocket,be="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),Ee=function(e){y(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).supportsBinary=!e.forceBase64,r}return h(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=be?{}:J(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=be?new ge(e,t,n):t?new ge(e,t):new ge(e)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(){var n=e[r],i=r===e.length-1;B(n,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(e){}i&&me((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},r=0;r<e.length;r++)n()}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=ae()),this.supportsBinary||(e.b64=1);var r=ue(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!ge}}]),n}(ee),we={websocket:Ee,polling:de},_e=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ke=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ae(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var i,o,s=_e.exec(e||""),a={},u=14;u--;)a[ke[u]]=s[u]||"";return-1!=n&&-1!=r&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,a.path),a.queryKey=(i=a.query,o={},i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(o[t]=n)})),o),a}var Se=function(e){y(n,e);var t=_(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,n),(r=t.call(this)).writeBuffer=[],e&&"object"===a(e)&&(i=e,e=null),e?(e=Ae(e),i.hostname=e.host,i.secure="https"===e.protocol||"wss"===e.protocol,i.port=e.port,e.query&&(i.query=e.query)):i.host&&(i.hostname=Ae(i.host).host),X(w(r),i),r.secure=null!=i.secure?i.secure:"undefined"!=typeof location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=r.secure?"443":"80"),r.hostname=i.hostname||("undefined"!=typeof location?location.hostname:"localhost"),r.port=i.port||("undefined"!=typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=i.transports||["polling","websocket"],r.writeBuffer=[],r.prevBufferLen=0,r.opts=d({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),r.opts.path=r.opts.path.replace(/\/$/,"")+(r.opts.addTrailingSlash?"/":""),"string"==typeof r.opts.query&&(r.opts.query=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"==typeof addEventListener&&(r.opts.closeOnBeforeunload&&(r.beforeunloadEventListener=function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())},addEventListener("beforeunload",r.beforeunloadEventListener,!1)),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return h(n,[{key:"createTransport",value:function(e){var t=d({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=d({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new we[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(e){return t.onClose("transport close",e)}))}},{key:"probe",value:function(e){var t=this,r=this.createTransport(e),i=!1;n.priorWebsocketSuccess=!1;var o=function(){i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(e){if(!i)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,t.transport.pause((function(){i||"closed"!==t.readyState&&(l(),t.setTransport(r),r.send([{type:"upgrade"}]),t.emitReserved("upgrade",r),r=null,t.upgrading=!1,t.flush())}))}else{var o=new Error("probe error");o.transport=r.name,t.emitReserved("upgradeError",o)}})))};function s(){i||(i=!0,l(),r.close(),r=null)}var a=function(e){var n=new Error("probe error: "+e);n.transport=r.name,s(),t.emitReserved("upgradeError",n)};function u(){a("transport closed")}function c(){a("socket closed")}function f(e){r&&e.name!==r.name&&s()}var l=function(){r.removeListener("open",o),r.removeListener("error",a),r.removeListener("close",u),t.off("close",c),t.off("upgrading",f)};r.once("open",o),r.once("error",a),r.once("close",u),this.once("close",c),this.once("upgrading",f),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e,t=1,n=0;n<this.writeBuffer.length;n++){var r=this.writeBuffer[n].data;if(r&&(t+="string"==typeof(e=r)?function(e){for(var t=0,n=0,r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil((e.byteLength||e.size)*$)),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){n.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),n}(V);Se.protocol=4,Se.protocol;var Oe="function"==typeof ArrayBuffer,Te=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer},Ce=Object.prototype.toString,Re="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Ce.call(Blob),xe="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Ce.call(File);function Ne(e){return Oe&&(e instanceof ArrayBuffer||Te(e))||Re&&e instanceof Blob||xe&&e instanceof File}function Le(e,t){if(!e||"object"!==a(e))return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(Le(e[n]))return!0;return!1}if(Ne(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return Le(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&Le(e[i]))return!0;return!1}function je(e){var t=[],n=e.data,r=e;return r.data=Pe(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Pe(e,t){if(!e)return e;if(Ne(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=Pe(e[i],t);return r}if("object"===a(e)&&!(e instanceof Date)){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(o[s]=Pe(e[s],t));return o}return e}function Be(e,t){return e.data=Me(e.data,t),delete e.attachments,e}function Me(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=Me(e[n],t);else if("object"===a(e))for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Me(e[r],t));return e}var Ie;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Ie||(Ie={}));var De=function(){function e(t){f(this,e),this.replacer=t}return h(e,[{key:"encode",value:function(e){return e.type!==Ie.EVENT&&e.type!==Ie.ACK||!Le(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Ie.EVENT?Ie.BINARY_EVENT:Ie.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==Ie.BINARY_EVENT&&e.type!==Ie.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=je(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}(),Fe=function(e){y(n,e);var t=_(n);function n(e){var r;return f(this,n),(r=t.call(this)).reviver=e,r}return h(n,[{key:"add",value:function(e){var t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var r=(t=this.decodeString(e)).type===Ie.BINARY_EVENT;r||t.type===Ie.BINARY_ACK?(t.type=r?Ie.EVENT:Ie.ACK,this.reconstructor=new Ue(t),0===t.attachments&&k(v(n.prototype),"emitReserved",this).call(this,"decoded",t)):k(v(n.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!Ne(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,k(v(n.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,r={type:Number(e.charAt(0))};if(void 0===Ie[r.type])throw new Error("unknown packet type "+r.type);if(r.type===Ie.BINARY_EVENT||r.type===Ie.BINARY_ACK){for(var i=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var o=e.substring(i,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===e.charAt(t+1)){for(var s=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(s,t)}else r.nsp="/";var a=e.charAt(t+1);if(""!==a&&Number(a)==a){for(var u=t+1;++t;){var c=e.charAt(t);if(null==c||Number(c)!=c){--t;break}if(t===e.length)break}r.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var f=this.tryParse(e.substr(t));if(!n.isPayloadValid(r.type,f))throw new Error("invalid payload");r.data=f}return r}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case Ie.CONNECT:return"object"===a(t);case Ie.DISCONNECT:return void 0===t;case Ie.CONNECT_ERROR:return"string"==typeof t||"object"===a(t);case Ie.EVENT:case Ie.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case Ie.ACK:case Ie.BINARY_ACK:return Array.isArray(t)}}}]),n}(V),Ue=function(){function e(t){f(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return h(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=Be(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}(),qe=Object.freeze({__proto__:null,protocol:5,get PacketType(){return Ie},Encoder:De,Decoder:Fe});function He(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var ze=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Ke=function(e){y(n,e);var t=_(n);function n(e,r,i){var o;return f(this,n),(o=t.call(this)).connected=!1,o.recovered=!1,o.receiveBuffer=[],o.sendBuffer=[],o._queue=[],o._queueSeq=0,o.ids=0,o.acks={},o.flags={},o.io=e,o.nsp=r,i&&i.auth&&(o.auth=i.auth),o._opts=d({},i),o.io._autoConnect&&o.open(),o}return h(n,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[He(e,"open",this.onopen.bind(this)),He(e,"packet",this.onpacket.bind(this)),He(e,"error",this.onerror.bind(this)),He(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(ze.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;var i={type:Ie.EVENT,data:n,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]){var o=this.ids++,s=n.pop();this._registerAckCallback(o,s),i.id=o}var a=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!a||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n,r=this,i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0!==i){var o=this.io.setTimeoutFn((function(){delete r.acks[e];for(var n=0;n<r.sendBuffer.length;n++)r.sendBuffer[n].id===e&&r.sendBuffer.splice(n,1);t.call(r,new Error("operation has timed out"))}),i);this.acks[e]=function(){r.io.clearTimeoutFn(o);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(r,[null].concat(n))}}else this.acks[e]=t}},{key:"emitWithAck",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((function(n,i){r.push((function(e,t){return o?e?i(e):n(t):n(e)})),t.emit.apply(t,[e].concat(r))}))}},{key:"_addToQueue",value:function(e){var t,n=this;"function"==typeof e[e.length-1]&&(t=e.pop());var r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:d({fromQueue:!0},this.flags)};e.push((function(e){if(r===n._queue[0]){if(null!==e)r.tryCount>n._opts.retries&&(n._queue.shift(),t&&t(e));else if(n._queue.shift(),t){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];t.apply(void 0,[null].concat(o))}return r.pending=!1,n._drainQueue()}})),this._queue.push(r),this._drainQueue()}},{key:"_drainQueue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&0!==this._queue.length){var t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}},{key:"_sendConnectPacket",value:function(e){this.packet({type:Ie.CONNECT,data:this._pid?d({pid:this._pid,offset:this._lastOffset},e):e})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case Ie.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ie.EVENT:case Ie.BINARY_EVENT:this.onevent(e);break;case Ie.ACK:case Ie.BINARY_ACK:this.onack(e);break;case Ie.DISCONNECT:this.ondisconnect();break;case Ie.CONNECT_ERROR:this.destroy();var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,r=C(this._anyListeners.slice());try{for(r.s();!(t=r.n()).done;){t.value.apply(this,e)}}catch(e){r.e(e)}finally{r.f()}}k(v(n.prototype),"emit",this).apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t.packet({type:Ie.ACK,id:e,data:i})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){e.notifyOutgoingListeners(t),e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Ie.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,n=C(this._anyOutgoingListeners.slice());try{for(n.s();!(t=n.n()).done;){t.value.apply(this,e.data)}}catch(e){n.e(e)}finally{n.f()}}}}]),n}(V);function Ve(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Ve.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Ve.prototype.reset=function(){this.attempts=0},Ve.prototype.setMin=function(e){this.ms=e},Ve.prototype.setMax=function(e){this.max=e},Ve.prototype.setJitter=function(e){this.jitter=e};var Ge=function(e){y(n,e);var t=_(n);function n(e,r){var i,o;f(this,n),(i=t.call(this)).nsps={},i.subs=[],e&&"object"===a(e)&&(r=e,e=void 0),(r=r||{}).path=r.path||"/socket.io",i.opts=r,X(w(i),r),i.reconnection(!1!==r.reconnection),i.reconnectionAttempts(r.reconnectionAttempts||1/0),i.reconnectionDelay(r.reconnectionDelay||1e3),i.reconnectionDelayMax(r.reconnectionDelayMax||5e3),i.randomizationFactor(null!==(o=r.randomizationFactor)&&void 0!==o?o:.5),i.backoff=new Ve({min:i.reconnectionDelay(),max:i.reconnectionDelayMax(),jitter:i.randomizationFactor()}),i.timeout(null==r.timeout?2e4:r.timeout),i._readyState="closed",i.uri=e;var s=r.parser||qe;return i.encoder=new s.Encoder,i.decoder=new s.Decoder,i._autoConnect=!1!==r.autoConnect,i._autoConnect&&i.open(),i}return h(n,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new Se(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var i=He(n,"open",(function(){r.onopen(),e&&e()})),o=He(n,"error",(function(n){r.cleanup(),r._readyState="closed",t.emitReserved("error",n),e?e(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;0===s&&i();var a=this.setTimeoutFn((function(){i(),n.close(),n.emit("error",new Error("timeout"))}),s);this.opts.autoUnref&&a.unref(),this.subs.push((function(){clearTimeout(a)}))}return this.subs.push(i),this.subs.push(o),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(He(e,"ping",this.onping.bind(this)),He(e,"data",this.ondata.bind(this)),He(e,"error",this.onerror.bind(this)),He(e,"close",this.onclose.bind(this)),He(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}},{key:"ondecoded",value:function(e){var t=this;me((function(){t.emitReserved("packet",e)}),this.setTimeoutFn)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Ke(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),n}(V),Je={};function We(e,t){"object"===a(e)&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=Ae(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),i=r.source,o=r.id,s=r.path,u=Je[o]&&s in Je[o].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||u?n=new Ge(i,t):(Je[o]||(Je[o]=new Ge(i,t)),n=Je[o]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}function Ye(e,t){return function(){return e.apply(t,arguments)}}d(We,{Manager:Ge,Socket:Ke,io:We,connect:We});var Xe=Object.prototype.toString,$e=Object.getPrototypeOf,Qe=function(e){return function(t){var n=Xe.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null)),Ze=function(e){return e=e.toLowerCase(),function(t){return Qe(t)===e}},et=function(e){return function(t){return a(t)===e}},tt=Array.isArray,nt=et("undefined");var rt=Ze("ArrayBuffer");var it=et("string"),ot=et("function"),st=et("number"),at=function(e){return null!==e&&"object"===a(e)},ut=function(e){if("object"!==Qe(e))return!1;var t=$e(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},ct=Ze("Date"),ft=Ze("File"),lt=Ze("Blob"),ht=Ze("FileList"),pt=Ze("URLSearchParams");function dt(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,o=void 0!==i&&i;if(null!=e)if("object"!==a(e)&&(e=[e]),tt(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var s,u=o?Object.getOwnPropertyNames(e):Object.keys(e),c=u.length;for(n=0;n<c;n++)s=u[n],t.call(null,e[s],s,e)}}function yt(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var vt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,mt=function(e){return!nt(e)&&e!==vt};var gt,bt=(gt="undefined"!=typeof Uint8Array&&$e(Uint8Array),function(e){return gt&&e instanceof gt}),Et=Ze("HTMLFormElement"),wt=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),_t=Ze("RegExp"),kt=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};dt(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},At="abcdefghijklmnopqrstuvwxyz",St="0123456789",Ot={DIGIT:St,ALPHA:At,ALPHA_DIGIT:At+At.toUpperCase()+St};var Tt={isArray:tt,isArrayBuffer:rt,isBuffer:function(e){return null!==e&&!nt(e)&&null!==e.constructor&&!nt(e.constructor)&&ot(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||Xe.call(e)===t||ot(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&rt(e.buffer)},isString:it,isNumber:st,isBoolean:function(e){return!0===e||!1===e},isObject:at,isPlainObject:ut,isUndefined:nt,isDate:ct,isFile:ft,isBlob:lt,isRegExp:_t,isFunction:ot,isStream:function(e){return at(e)&&ot(e.pipe)},isURLSearchParams:pt,isTypedArray:bt,isFileList:ht,forEach:dt,merge:function e(){for(var t=(mt(this)&&this||{}).caseless,n={},r=function(r,i){var o=t&&yt(n,i)||i;ut(n[o])&&ut(r)?n[o]=e(n[o],r):ut(r)?n[o]=e({},r):tt(r)?n[o]=r.slice():n[o]=r},i=0,o=arguments.length;i<o;i++)arguments[i]&&dt(arguments[i],r);return n},extend:function(e,t,n){return dt(t,(function(t,r){n&&ot(t)?e[r]=Ye(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&d(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,o,s,a={};if(t=t||{},null==e)return t;do{for(o=(i=Object.getOwnPropertyNames(e)).length;o-- >0;)s=i[o],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&$e(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Qe,kindOfTest:Ze,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(tt(e))return e;var t=e.length;if(!st(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Et,hasOwnProperty:wt,hasOwnProp:wt,reduceDescriptors:kt,freezeMethods:function(e){kt(e,(function(t,n){if(ot(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];ot(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return tt(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:yt,global:vt,isContextDefined:mt,ALPHABET:Ot,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&ot(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(at(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=tt(n)?[]:{};return dt(n,(function(t,n){var o=e(t,r+1);!nt(o)&&(i[n]=o)})),t[r]=void 0,i}}return n}(e,0)}};function Ct(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Tt.inherits(Ct,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Tt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Rt=Ct.prototype,xt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){xt[e]={value:e}})),Object.defineProperties(Ct,xt),Object.defineProperty(Rt,"isAxiosError",{value:!0}),Ct.from=function(e,t,n,r,i,o){var s=Object.create(Rt);return Tt.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),Ct.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&d(s,o),s};function Nt(e){return Tt.isPlainObject(e)||Tt.isArray(e)}function Lt(e){return Tt.endsWith(e,"[]")?e.slice(0,-2):e}function jt(e,t,n){return e?e.concat(t).map((function(e,t){return e=Lt(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var Pt=Tt.toFlatObject(Tt,{},null,(function(e){return/^is[A-Z]/.test(e)}));function Bt(e,t,n){if(!Tt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=Tt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Tt.isUndefined(t[e])}))).metaTokens,i=n.visitor||f,o=n.dots,s=n.indexes,u=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Tt.isSpecCompliantForm(t);if(!Tt.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Tt.isDate(e))return e.toISOString();if(!u&&Tt.isBlob(e))throw new Ct("Blob is not supported. Use a Buffer instead.");return Tt.isArrayBuffer(e)||Tt.isTypedArray(e)?u&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function f(e,n,i){var u=e;if(e&&!i&&"object"===a(e))if(Tt.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Tt.isArray(e)&&function(e){return Tt.isArray(e)&&!e.some(Nt)}(e)||(Tt.isFileList(e)||Tt.endsWith(n,"[]"))&&(u=Tt.toArray(e)))return n=Lt(n),u.forEach((function(e,r){!Tt.isUndefined(e)&&null!==e&&t.append(!0===s?jt([n],r,o):null===s?n:n+"[]",c(e))})),!1;return!!Nt(e)||(t.append(jt(i,n,o),c(e)),!1)}var l=[],h=d(Pt,{defaultVisitor:f,convertValue:c,isVisitable:Nt});if(!Tt.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Tt.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),Tt.forEach(n,(function(n,o){!0===(!(Tt.isUndefined(n)||null===n)&&i.call(t,n,Tt.isString(o)?o.trim():o,r,h))&&e(n,r?r.concat(o):[o])})),l.pop()}}(e),t}function Mt(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function It(e,t){this._pairs=[],e&&Bt(e,this,t)}var Dt=It.prototype;function Ft(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ut(e,t,n){if(!t)return e;var r,i=n&&n.encode||Ft,o=n&&n.serialize;if(r=o?o(t,n):Tt.isURLSearchParams(t)?t.toString():new It(t,n).toString(i)){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}Dt.append=function(e,t){this._pairs.push([e,t])},Dt.toString=function(e){var t=e?function(t){return e.call(this,t,Mt)}:Mt;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var qt,Ht=function(){function e(){f(this,e),this.handlers=[]}return h(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){Tt.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),zt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kt={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:It,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:("undefined"==typeof navigator||"ReactNative"!==(qt=navigator.product)&&"NativeScript"!==qt&&"NS"!==qt)&&"undefined"!=typeof window&&"undefined"!=typeof document,isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};function Vt(e){function t(e,n,r,i){var o=e[i++],s=Number.isFinite(+o),a=i>=e.length;return o=!o&&Tt.isArray(r)?r.length:o,a?(Tt.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s):(r[o]&&Tt.isObject(r[o])||(r[o]=[]),t(e,n,r[o],i)&&Tt.isArray(r[o])&&(r[o]=function(e){var t,n,r={},i=Object.keys(e),o=i.length;for(t=0;t<o;t++)r[n=i[t]]=e[n];return r}(r[o])),!s)}if(Tt.isFormData(e)&&Tt.isFunction(e.entries)){var n={};return Tt.forEachEntry(e,(function(e,r){t(function(e){return Tt.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null}var Gt={"Content-Type":void 0};var Jt={transitional:zt,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,o=Tt.isObject(e);if(o&&Tt.isHTMLForm(e)&&(e=new FormData(e)),Tt.isFormData(e))return i&&i?JSON.stringify(Vt(e)):e;if(Tt.isArrayBuffer(e)||Tt.isBuffer(e)||Tt.isStream(e)||Tt.isFile(e)||Tt.isBlob(e))return e;if(Tt.isArrayBufferView(e))return e.buffer;if(Tt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Bt(e,new Kt.classes.URLSearchParams,d({visitor:function(e,t,n,r){return Kt.isNode&&Tt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=Tt.isFileList(e))||r.indexOf("multipart/form-data")>-1){var s=this.env&&this.env.FormData;return Bt(n?{"files[]":e}:e,s&&new s,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),function(e,t,n){if(Tt.isString(e))try{return(t||JSON.parse)(e),Tt.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Jt.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&Tt.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw Ct.from(e,Ct.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kt.classes.FormData,Blob:Kt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Tt.forEach(["delete","get","head"],(function(e){Jt.headers[e]={}})),Tt.forEach(["post","put","patch"],(function(e){Jt.headers[e]=Tt.merge(Gt)}));var Wt=Jt,Yt=Tt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Xt=Symbol("internals");function $t(e){return e&&String(e).trim().toLowerCase()}function Qt(e){return!1===e||null==e?e:Tt.isArray(e)?e.map(Qt):String(e)}function Zt(e,t,n,r,i){return Tt.isFunction(r)?r.call(this,t,n):(i&&(t=n),Tt.isString(t)?Tt.isString(r)?-1!==t.indexOf(r):Tt.isRegExp(r)?r.test(t):void 0:void 0)}var en=function(e,t){function n(e){f(this,n),e&&this.set(e)}return h(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=$t(t);if(!i)throw new Error("header name must be a non-empty string");var o=Tt.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=Qt(e))}var o=function(e,t){return Tt.forEach(e,(function(e,n){return i(e,n,t)}))};return Tt.isPlainObject(e)||e instanceof this.constructor?o(e,t):Tt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?o(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&Yt[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=$t(e)){var n=Tt.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(Tt.isFunction(t))return t.call(this,r,n);if(Tt.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=$t(e)){var n=Tt.findKey(this,e);return!(!n||void 0===this[n]||t&&!Zt(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=$t(e)){var i=Tt.findKey(n,e);!i||t&&!Zt(0,n[i],i,t)||(delete n[i],r=!0)}}return Tt.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!Zt(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return Tt.forEach(this,(function(r,i){var o=Tt.findKey(n,i);if(o)return t[o]=Qt(r),void delete t[i];var s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();s!==i&&delete t[i],t[s]=Qt(r),n[s]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return Tt.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&Tt.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=A(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[Xt]=this[Xt]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=$t(e);t[r]||(!function(e,t){var n=Tt.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Tt.isArray(e)?e.forEach(r):r(e),this}}]),n}();en.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Tt.freezeMethods(en.prototype),Tt.freezeMethods(en);var tn=en;function nn(e,t){var n=this||Wt,r=t||n,i=tn.from(r.headers),o=r.data;return Tt.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function rn(e){return!(!e||!e.__CANCEL__)}function on(e,t,n){Ct.call(this,null==e?"canceled":e,Ct.ERR_CANCELED,t,n),this.name="CanceledError"}Tt.inherits(on,Ct,{__CANCEL__:!0});var sn=Kt.isStandardBrowserEnv?{write:function(e,t,n,r,i,o){var s=[];s.push(e+"="+encodeURIComponent(t)),Tt.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Tt.isString(r)&&s.push("path="+r),Tt.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function an(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var un=Kt.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=Tt.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function cn(e,t){var n=0,r=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),o=0,s=0;return t=void 0!==t?t:1e3,function(a){var u=Date.now(),c=i[s];n||(n=u),r[o]=a,i[o]=u;for(var f=s,l=0;f!==o;)l+=r[f++],f%=e;if((o=(o+1)%e)===s&&(s=(s+1)%e),!(u-n<t)){var h=c&&u-c;return h?Math.round(1e3*l/h):void 0}}}(50,250);return function(i){var o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-n,u=r(a);n=o;var c={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:u||void 0,estimated:u&&s&&o<=s?(s-o)/u:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var fn="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,o=tn.from(e.headers).normalize(),s=e.responseType;function a(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}Tt.isFormData(i)&&(Kt.isStandardBrowserEnv||Kt.isStandardBrowserWebWorkerEnv)&&o.setContentType(!1);var u=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(c+":"+f))}var l=an(e.baseURL,e.url);function h(){if(u){var r=tn.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Ct("Request failed with status code "+n.status,[Ct.ERR_BAD_REQUEST,Ct.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),a()}),(function(e){n(e),a()}),{data:s&&"text"!==s&&"json"!==s?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}}if(u.open(e.method.toUpperCase(),Ut(l,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(h)},u.onabort=function(){u&&(n(new Ct("Request aborted",Ct.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new Ct("Network Error",Ct.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||zt;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Ct(t,r.clarifyTimeoutError?Ct.ETIMEDOUT:Ct.ECONNABORTED,e,u)),u=null},Kt.isStandardBrowserEnv){var p=(e.withCredentials||un(l))&&e.xsrfCookieName&&sn.read(e.xsrfCookieName);p&&o.set(e.xsrfHeaderName,p)}void 0===i&&o.setContentType(null),"setRequestHeader"in u&&Tt.forEach(o.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),Tt.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),s&&"json"!==s&&(u.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",cn(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",cn(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){u&&(n(!t||t.type?new on(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var d=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(l);d&&-1===Kt.protocols.indexOf(d)?n(new Ct("Unsupported protocol "+d+":",Ct.ERR_BAD_REQUEST,e)):u.send(i||null)}))},ln={http:null,xhr:fn};Tt.forEach(ln,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));var hn={getAdapter:function(e){for(var t,n,r=(e=Tt.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=Tt.isString(t)?ln[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new Ct("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(Tt.hasOwnProp(ln,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!Tt.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:ln};function pn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new on(null,e)}function dn(e){return pn(e),e.headers=tn.from(e.headers),e.data=nn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),hn.getAdapter(e.adapter||Wt.adapter)(e).then((function(t){return pn(e),t.data=nn.call(e,e.transformResponse,t),t.headers=tn.from(t.headers),t}),(function(t){return rn(t)||(pn(e),t&&t.response&&(t.response.data=nn.call(e,e.transformResponse,t.response),t.response.headers=tn.from(t.response.headers))),Promise.reject(t)}))}var yn=function(e){return e instanceof tn?e.toJSON():e};function vn(e,t){t=t||{};var n={};function r(e,t,n){return Tt.isPlainObject(e)&&Tt.isPlainObject(t)?Tt.merge.call({caseless:n},e,t):Tt.isPlainObject(t)?Tt.merge({},t):Tt.isArray(t)?t.slice():t}function i(e,t,n){return Tt.isUndefined(t)?Tt.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!Tt.isUndefined(t))return r(void 0,t)}function s(e,t){return Tt.isUndefined(t)?Tt.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}var u={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:function(e,t){return i(yn(e),yn(t),!0)}};return Tt.forEach(Object.keys(e).concat(Object.keys(t)),(function(r){var o=u[r]||i,s=o(e[r],t[r],r);Tt.isUndefined(s)&&o!==a||(n[r]=s)})),n}var mn="1.3.5",gn={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){gn[e]=function(n){return a(n)===e||"a"+(t<1?"n ":" ")+e}}));var bn={};gn.transitional=function(e,t,n){function r(e,t){return"[Axios v1.3.5] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,o){if(!1===e)throw new Ct(r(i," has been removed"+(t?" in "+t:"")),Ct.ERR_DEPRECATED);return t&&!bn[i]&&(bn[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};var En={assertOptions:function(e,t,n){if("object"!==a(e))throw new Ct("options must be an object",Ct.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],s=t[o];if(s){var u=e[o],c=void 0===u||s(u,o,e);if(!0!==c)throw new Ct("option "+o+" must be "+c,Ct.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Ct("Unknown option "+o,Ct.ERR_BAD_OPTION)}},validators:gn},wn=En.validators,_n=function(){function e(t){f(this,e),this.defaults=t,this.interceptors={request:new Ht,response:new Ht}}return h(e,[{key:"request",value:function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{};var n,r=t=vn(this.defaults,t),i=r.transitional,o=r.paramsSerializer,s=r.headers;void 0!==i&&En.assertOptions(i,{silentJSONParsing:wn.transitional(wn.boolean),forcedJSONParsing:wn.transitional(wn.boolean),clarifyTimeoutError:wn.transitional(wn.boolean)},!1),null!=o&&(Tt.isFunction(o)?t.paramsSerializer={serialize:o}:En.assertOptions(o,{encode:wn.function,serialize:wn.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=s&&Tt.merge(s.common,s[t.method]))&&Tt.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete s[e]})),t.headers=tn.concat(n,s);var a=[],u=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(u=u&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));var c,f=[];this.interceptors.response.forEach((function(e){f.push(e.fulfilled,e.rejected)}));var l,h=0;if(!u){var p=[dn.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,f),l=p.length,c=Promise.resolve(t);h<l;)c=c.then(p[h++],p[h++]);return c}l=a.length;var d=t;for(h=0;h<l;){var y=a[h++],v=a[h++];try{d=y(d)}catch(e){v.call(this,e);break}}try{c=dn.call(this,d)}catch(e){return Promise.reject(e)}for(h=0,l=f.length;h<l;)c=c.then(f[h++],f[h++]);return c}},{key:"getUri",value:function(e){return Ut(an((e=vn(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();Tt.forEach(["delete","get","head","options"],(function(e){_n.prototype[e]=function(t,n){return this.request(vn(n||{},{method:e,url:t,data:(n||{}).data}))}})),Tt.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(vn(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}_n.prototype[e]=t(),_n.prototype[e+"Form"]=t(!0)}));var kn=_n,An=function(){function e(t){if(f(this,e),"function"!=typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new on(e,t,i),n(r.reason))}))}return h(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}]),e}(),Sn=An;var On={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(On).forEach((function(e){var t=A(e,2),n=t[0],r=t[1];On[r]=n}));var Tn=On;var Cn=function e(t){var n=new kn(t),r=Ye(kn.prototype.request,n);return Tt.extend(r,kn.prototype,n,{allOwnKeys:!0}),Tt.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(vn(t,n))},r}(Wt);Cn.Axios=kn,Cn.CanceledError=on,Cn.CancelToken=Sn,Cn.isCancel=rn,Cn.VERSION=mn,Cn.toFormData=Bt,Cn.AxiosError=Ct,Cn.Cancel=Cn.CanceledError,Cn.all=function(e){return Promise.all(e)},Cn.spread=function(e){return function(t){return e.apply(null,t)}},Cn.isAxiosError=function(e){return Tt.isObject(e)&&!0===e.isAxiosError},Cn.mergeConfig=vn,Cn.AxiosHeaders=tn,Cn.formToJSON=function(e){return Vt(Tt.isHTMLForm(e)?new FormData(e):e)},Cn.HttpStatusCode=Tn,Cn.default=Cn;var Rn=Cn;Rn.Axios,Rn.AxiosError,Rn.CanceledError,Rn.isCancel,Rn.CancelToken,Rn.VERSION,Rn.all,Rn.Cancel,Rn.isAxiosError,Rn.spread,Rn.toFormData,Rn.AxiosHeaders,Rn.HttpStatusCode,Rn.formToJSON,Rn.mergeConfig;var xn,Nn,Ln={},jn={get exports(){return Ln},set exports(e){Ln=e}},Pn={};xn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nn={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&Nn.rotl(e,8)|4278255360&Nn.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=Nn.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var r=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?t.push(xn.charAt(r>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,r=0;n<e.length;r=++n%4)0!=r&&t.push((xn.indexOf(e.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|xn.indexOf(e.charAt(n))>>>6-2*r);return t}},{get exports(){return Pn},set exports(e){Pn=e}}.exports=Nn;var Bn,Mn,In,Dn,Fn,Un,qn,Hn={utf8:{stringToBytes:function(e){return Hn.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(Hn.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}},zn=Hn,Kn=function(e){return null!=e&&(Vn(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Vn(e.slice(0,0))}(e)||!!e._isBuffer)};function Vn(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}!function(){var e=Pn,t=zn.utf8,n=Kn,r=zn.bin,i=function i(o,s){o.constructor==String?o=s&&"binary"===s.encoding?r.stringToBytes(o):t.stringToBytes(o):n(o)?o=Array.prototype.slice.call(o,0):Array.isArray(o)||o.constructor===Uint8Array||(o=o.toString());for(var a=e.bytesToWords(o),u=8*o.length,c=1732584193,f=-271733879,l=-1732584194,h=271733878,p=0;p<a.length;p++)a[p]=16711935&(a[p]<<8|a[p]>>>24)|4278255360&(a[p]<<24|a[p]>>>8);a[u>>>5]|=128<<u%32,a[14+(u+64>>>9<<4)]=u;var d=i._ff,y=i._gg,v=i._hh,m=i._ii;for(p=0;p<a.length;p+=16){var g=c,b=f,E=l,w=h;c=d(c,f,l,h,a[p+0],7,-680876936),h=d(h,c,f,l,a[p+1],12,-389564586),l=d(l,h,c,f,a[p+2],17,606105819),f=d(f,l,h,c,a[p+3],22,-1044525330),c=d(c,f,l,h,a[p+4],7,-176418897),h=d(h,c,f,l,a[p+5],12,1200080426),l=d(l,h,c,f,a[p+6],17,-1473231341),f=d(f,l,h,c,a[p+7],22,-45705983),c=d(c,f,l,h,a[p+8],7,1770035416),h=d(h,c,f,l,a[p+9],12,-1958414417),l=d(l,h,c,f,a[p+10],17,-42063),f=d(f,l,h,c,a[p+11],22,-1990404162),c=d(c,f,l,h,a[p+12],7,1804603682),h=d(h,c,f,l,a[p+13],12,-40341101),l=d(l,h,c,f,a[p+14],17,-1502002290),c=y(c,f=d(f,l,h,c,a[p+15],22,1236535329),l,h,a[p+1],5,-165796510),h=y(h,c,f,l,a[p+6],9,-1069501632),l=y(l,h,c,f,a[p+11],14,643717713),f=y(f,l,h,c,a[p+0],20,-373897302),c=y(c,f,l,h,a[p+5],5,-701558691),h=y(h,c,f,l,a[p+10],9,38016083),l=y(l,h,c,f,a[p+15],14,-660478335),f=y(f,l,h,c,a[p+4],20,-405537848),c=y(c,f,l,h,a[p+9],5,568446438),h=y(h,c,f,l,a[p+14],9,-1019803690),l=y(l,h,c,f,a[p+3],14,-187363961),f=y(f,l,h,c,a[p+8],20,1163531501),c=y(c,f,l,h,a[p+13],5,-1444681467),h=y(h,c,f,l,a[p+2],9,-51403784),l=y(l,h,c,f,a[p+7],14,1735328473),c=v(c,f=y(f,l,h,c,a[p+12],20,-1926607734),l,h,a[p+5],4,-378558),h=v(h,c,f,l,a[p+8],11,-2022574463),l=v(l,h,c,f,a[p+11],16,1839030562),f=v(f,l,h,c,a[p+14],23,-35309556),c=v(c,f,l,h,a[p+1],4,-1530992060),h=v(h,c,f,l,a[p+4],11,1272893353),l=v(l,h,c,f,a[p+7],16,-155497632),f=v(f,l,h,c,a[p+10],23,-1094730640),c=v(c,f,l,h,a[p+13],4,681279174),h=v(h,c,f,l,a[p+0],11,-358537222),l=v(l,h,c,f,a[p+3],16,-722521979),f=v(f,l,h,c,a[p+6],23,76029189),c=v(c,f,l,h,a[p+9],4,-640364487),h=v(h,c,f,l,a[p+12],11,-421815835),l=v(l,h,c,f,a[p+15],16,530742520),c=m(c,f=v(f,l,h,c,a[p+2],23,-995338651),l,h,a[p+0],6,-198630844),h=m(h,c,f,l,a[p+7],10,1126891415),l=m(l,h,c,f,a[p+14],15,-1416354905),f=m(f,l,h,c,a[p+5],21,-57434055),c=m(c,f,l,h,a[p+12],6,1700485571),h=m(h,c,f,l,a[p+3],10,-1894986606),l=m(l,h,c,f,a[p+10],15,-1051523),f=m(f,l,h,c,a[p+1],21,-2054922799),c=m(c,f,l,h,a[p+8],6,1873313359),h=m(h,c,f,l,a[p+15],10,-30611744),l=m(l,h,c,f,a[p+6],15,-1560198380),f=m(f,l,h,c,a[p+13],21,1309151649),c=m(c,f,l,h,a[p+4],6,-145523070),h=m(h,c,f,l,a[p+11],10,-1120210379),l=m(l,h,c,f,a[p+2],15,718787259),f=m(f,l,h,c,a[p+9],21,-343485551),c=c+g>>>0,f=f+b>>>0,l=l+E>>>0,h=h+w>>>0}return e.endian([c,f,l,h])};i._ff=function(e,t,n,r,i,o,s){var a=e+(t&n|~t&r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},i._gg=function(e,t,n,r,i,o,s){var a=e+(t&r|n&~r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},i._hh=function(e,t,n,r,i,o,s){var a=e+(t^n^r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},i._ii=function(e,t,n,r,i,o,s){var a=e+(n^(t|~r))+(i>>>0)+s;return(a<<o|a>>>32-o)+t},i._blocksize=16,i._digestsize=16,jn.exports=function(t,n){if(null==t)throw new Error("Illegal argument "+t);var o=e.wordsToBytes(i(t,n));return n&&n.asBytes?o:n&&n.asString?r.bytesToString(o):e.bytesToHex(o)}}(),function(e){e.FREE="FREE",e.PRODUCTION="PRODUCTION",e.ADVANCED="ADVANCED",e.ENTERPRISE="ENTERPRISE"}(Mn||(Mn={})),function(e){e.SUPER="SUPER",e.WRITE="WRITE",e.READ="READ"}(In||(In={})),e.eMessageType=void 0,(Dn=e.eMessageType||(e.eMessageType={})).TEXT="TEXT",Dn.FILE="FILE",Dn.JSON="JSON",e.eMessageBy=void 0,(Fn=e.eMessageBy||(e.eMessageBy={})).USER="USER",Fn.ADMIN="ADMIN",Fn.SYSTEM="SYSTEM",e.eNotification=void 0,(Un=e.eNotification||(e.eNotification={})).CHATTY_USER_MESSAGE="CHATTY_USER_MESSAGE",Un.CHATTY_ADMIN_MESSAGE="CHATTY_ADMIN_MESSAGE",Un.CHATTY_SYSTEM_MESSAGE="CHATTY_SYSTEM_MESSAGE",e.eChattyEvent=void 0,(qn=e.eChattyEvent||(e.eChattyEvent={})).CONNECT="connection",qn.CONNECT_DONE="connect_done",qn.CONNECT_FAIL="connect_fail",qn.DISCONNECT="disconnect",qn.DISCONNECT_DONE="disconnect_done",qn.DISCONNECT_FAIL="disconnect_fail",qn.REFRESH_CHAT="refresh_chat",qn.REFRESH_CHAT_DONE="refresh_chat_done",qn.REFRESH_CHAT_FAIL="refresh_chat_fail",qn.RECEIVE_MESSAGE="receive_message",qn.FETCH_MESSAGES="fetch_messages",qn.FETCH_MESSAGES_DONE="fetch_messages_done",qn.FETCH_MESSAGES_FAIL="fetch_messages_fail",qn.UPDATE_MESSAGES="update_message",qn.FETCH_CHATS="fetch_chats",qn.FETCH_CHATS_DONE="fetch_chats_done",qn.FETCH_CHATS_FAIL="fetch_chats_fail",qn.SEND_MESSAGE="send_message",qn.SEND_MESSAGE_DONE="send_message_done",qn.SEND_MESSAGE_FAIL="send_message_fail",qn.SEND_MESSAGE_RETRY="send_message_retry",qn.DELETE_MESSAGE="delete_message",qn.DELETE_MESSAGE_DONE="delete_message_done",qn.DELETE_MESSAGE_FAIL="delete_message_fail",qn.MARK_AS_READ="mark_as_read",qn.MARK_AS_READ_DONE="mark_as_read_done",qn.MARK_AS_READ_FAIL="mark_as_read_fail",qn.MARK_AS_READ_BYPASS="mark_as_read_bypass",qn.INVITE_MEMBERS="invite_members",qn.INVITE_MEMBERS_DONE="invite_members_done",qn.INVITE_MEMBERS_FAIL="invite_members_fail",qn.EXCLUDE_MEMBERS="exclude_members",qn.EXCLUDE_MEMBERS_DONE="exclude_members_done",qn.EXCLUDE_MEMBERS_FAIL="exclude_members_fail",qn.JOIN_CHAT="join_chat",qn.JOIN_CHAT_DONE="join_chat_done",qn.JOIN_CHAT_FAIL="join_chat_fail",qn.LEAVE_CHAT="leave_chat",qn.LEAVE_CHAT_DONE="leave_chat_done",qn.LEAVE_CHAT_FAIL="leave_chat_fail";var Gn=function(){function t(){f(this,t)}var n,r,i,a,u,l,p,d,y,v,m;return h(t,null,[{key:"init",value:(m=c(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.apiKey,r=t.member,e.prev=1,n){e.next=4;break}return e.abrupt("return",Promise.reject({message:":: ChattyClient init() apiKey is required."}));case 4:return this.axiosInstance=Jn(n),this.apiKey=n,e.next=8,this.getApp();case 8:return this.app=e.sent,this.axiosInstance.defaults.headers.common.AppId=this.app.id,e.next=12,this.upsertMember(o(o({},r),{},{device:{platform:navigator.platform,language:navigator.language,product:navigator.product,userAgent:navigator.userAgent,sdkVersion:"1.2.0"}}));case 12:this.member=e.sent,this.axiosInstance.defaults.headers.common.MemberId=this.member.id,this.app&&this.member&&(console.debug(":: ChattyClient Initialized !!"),console.debug(":: ChattyClient App > ",this.app),console.debug(":: ChattyClient Member > ",this.member)),e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",Promise.reject({message:":: ChattyClient init fail - "+e.t0.message}));case 20:case"end":return e.stop()}}),e,this,[[1,17]])}))),function(e){return m.apply(this,arguments)})},{key:"exit",value:(v=c(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.deleteMember,r=void 0!==n&&n,e.prev=1,!this.member){e.next=10;break}if(!r){e.next=8;break}return e.next=6,this.deleteMember(this.member.id);case 6:e.next=10;break;case 8:return e.next=10,this.upsertMember(o(o({},this.member),{},{deviceToken:""}));case 10:this.apiKey=void 0,this.app=void 0,this.member=void 0,this.axiosInstance.defaults.headers.common={},console.debug(":: ChattyClient exit success"),e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",Promise.reject({message:":: ChattyClient exit fail - "+e.t0.message}));case 20:case"end":return e.stop()}}),e,this,[[1,17]])}))),function(e){return v.apply(this,arguments)})},{key:"getApp",value:(y=c(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/apps",{headers:{}});case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"getChats",value:(d=c(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/chats",{params:t});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"createChat",value:(p=c(s().mark((function t(n){var r,i,a,u,c=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.axiosInstance.post("/chats",o(o({},n),{},{image:n.image?{uri:n.image}:void 0,Members:null===(r=n.Members)||void 0===r?void 0:r.map((function(e){var t;return{MemberId:e,AppId:null===(t=c.app)||void 0===t?void 0:t.id}})),Messages:n.Message&&[o(o({},n.Message),{},{AppId:null===(i=this.app)||void 0===i?void 0:i.id,type:n.Message.json?e.eMessageType.JSON:e.eMessageType.TEXT})]}));case 2:return a=t.sent,u=a.data,t.abrupt("return",u);case 5:case"end":return t.stop()}}),t,this)}))),function(e){return p.apply(this,arguments)})},{key:"leaveChat",value:(l=c(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.delete("/chatmember",{params:{ChatId:t}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"updateChat",value:(u=c(s().mark((function t(n){var r,i,a,u,c=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.axiosInstance.put("/chats",o(o({},n),{},{image:n.image?{uri:n.image}:void 0,Members:null===(r=n.Members)||void 0===r?void 0:r.map((function(e){var t;return{MemberId:e,AppId:null===(t=c.app)||void 0===t?void 0:t.id}})),Messages:n.Message&&[o(o({},n.Message),{},{AppId:null===(i=this.app)||void 0===i?void 0:i.id,type:n.Message.json?e.eMessageType.JSON:e.eMessageType.TEXT})]}));case 2:return a=t.sent,u=a.data,t.abrupt("return",u);case 5:case"end":return t.stop()}}),t,this)}))),function(e){return u.apply(this,arguments)})},{key:"createAdminMessage",value:(a=c(s().mark((function t(n){var r,i,a,u,c=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.axiosInstance.post("/messages",o(o({},n),{},{image:n.image?{uri:n.image}:void 0,Members:null===(r=n.Members)||void 0===r?void 0:r.map((function(e){var t;return{MemberId:e,AppId:null===(t=c.app)||void 0===t?void 0:t.id}})),Messages:n.Message&&[o(o({},n.Message),{},{AppId:null===(i=this.app)||void 0===i?void 0:i.id,type:n.Message.json?e.eMessageType.JSON:e.eMessageType.TEXT,by:e.eMessageBy.ADMIN})]}));case 2:return a=t.sent,u=a.data,t.abrupt("return",u);case 5:case"end":return t.stop()}}),t,this)}))),function(e){return a.apply(this,arguments)})},{key:"getMembers",value:(i=c(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.get("/members",{params:t});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"upsertMember",value:(r=c(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.put("/members",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"deleteMember",value:(n=c(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axiosInstance.delete("/members/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"generateDistinctKey",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t&&t.length)if(this.app){t.push(this.app.id);var r=t.sort().toString();if(!(r.length>=255))return Ln(r);console.warn(":: ChattyClient generateDistinctKey error - md5 input string is too long")}else console.warn(":: ChattyClient generateDistinctKey error - Chatty was not initialized");else console.warn(":: ChattyClient generateDistinctKey error - param data is undefined")}}]),t}();Bn=Gn,Gn.getMissedCount=c(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Bn.app&&Bn.member){e.next=2;break}return e.abrupt("return",Promise.reject({message:":: ChattyClient getMissedCount fail - Chatty was not initialized"}));case 2:return e.next=4,Bn.axiosInstance.get("/missed-count");case 4:return t=e.sent,n=t.data,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));var Jn=function(e){var t=Rn.create();return t.defaults.baseURL="http://localhost:3300",t.defaults.headers.common.ApiKey=e,t.defaults.headers.common["Content-Type"]="application/json",t.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(o(o({},e),{},{message:":: ChattyClient Request Error"}))})),t.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(o(o({},e),{},{message:":: ChattyClient Response Error"}))})),t};e.Chatty=Gn,e.useChattySocket=function(t){var n=t.id,i=t.newChat,o=A(r.default.useState(null),2),s=o[0],a=o[1],u=A(r.default.useState([]),2),c=u[0],f=u[1],l=A(r.default.useState(!1),2),h=l[0],p=l[1],d=function(e){var t=e.id,n=e.newChat,i=A(r.default.useState(null),2),o=i[0],s=i[1];return r.default.useEffect((function(){var e,r,i=We("http://localhost:4400",{query:{id:t,Chat:n},auth:{apiKey:Gn.apiKey,MemberId:null===(e=Gn.member)||void 0===e?void 0:e.id,AppId:null===(r=Gn.app)||void 0===r?void 0:r.id}});return s(i),function(){i.close(),console.debug(":: ChattyClient - socket disconnected")}}),[]),o}({id:n,newChat:i});r.default.useEffect((function(){if(d)return d.on(e.eChattyEvent.CONNECT_DONE,(function(e){a(e.chat),f(e.messages),p(e.hasNext)})),d.on(e.eChattyEvent.CONNECT_FAIL,(function(e){console.warn(":: ChattyClient connection fail",e)})),d.on(e.eChattyEvent.FETCH_MESSAGES_DONE,(function(t){t.refresh?(f(t.messages),p(t.hasNext)):(f([].concat(S(c),S(t.messages))),p(t.hasNext)),d.emit(e.eChattyEvent.MARK_AS_READ)})),d.on(e.eChattyEvent.FETCH_MESSAGES_FAIL,(function(e){console.warn(":: ChattyClient fetch messages fail",e)})),function(){d.off(e.eChattyEvent.CONNECT_DONE),d.off(e.eChattyEvent.CONNECT_FAIL),d.off(e.eChattyEvent.FETCH_MESSAGES_DONE),d.off(e.eChattyEvent.FETCH_MESSAGES_FAIL)}}),[d]);return{chat:s,messages:c,getMessages:function(t){h&&d.emit(e.eChattyEvent.FETCH_MESSAGES,{refresh:t})}}},e.useInitialized=function(){var e=A(r.default.useState(!!(Gn.apiKey&&Gn.app&&Gn.member)),2),t=e[0];return e[1],r.default.useEffect((function(){if(!t)return function(){console.debug(":: ChattyClient useInitialized - remove listener initialized")}}),[]),t},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=chatty-client.min.js.map
